<!DOCTYPE html>
<html lang=”en”>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>MailMask</title>
        <link rel="stylesheet" href="style.css"> 
        <link rel="apple-touch-icon" sizes="180x180" href="img/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="img/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
        <link rel="manifest" href="img/site.webmanifest">
        <link rel="mask-icon" href="img/safari-pinned-tab.svg" color="#5bbad5">
        <meta name="msapplication-TileColor" content="#da532c">
        <meta name="theme-color" content="#ffffff">               
    </head>
    <body>
        <header>
            <div class="header-logo">
                <a href=""><img class="img-logo" src="img/logo_onWhite.png" alt="illustration logo"></a>
                <a href=""><img class="img-text-logo" src="img/logoText_simpleBlack.png" alt="mailmask logo"></a>    
            </div>
            
            <nav>
                <a class="nav-link" href="#howto">How It Works</a>                            
                <a class="nav-link" href="#support">Support</a>   
                <a class="nav-link" href="#cancel">Cancel Your MailMask</a> 
            </nav> 
        </header>
        
        <main>
            <section id="home"> <!-- HOME -->
                <div class="mail-overlay">
                    <img class="img-mail-backdrop" src="img/mail-backdrop.svg">
                </div>
                <div class="container">
                    <div class="content">
                        <div class="innerBox">                        
                            <div class="innerBox-text">                    
                                
                                <h1>Your email deserves <u>privacy</u>.</h1>
                            
                                                                        
                                <div class="catchphrase">
                                    <p>Generate a unique and random forwarding address so you can still recieve every email, newsletter etc. without sharing your personal address.</p>
                                </div>    
                                                    
                            </div>
                            <form action="">           
                                <input id="mail" placeholder="Enter your email here..." type="email" name="email" pattern="[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{1,63}$" required/>                                
                                <div class = "privacy-and-terms-checkbox">
                                    <input type="checkbox" id="checkbox" name="checkbox" required />
                                    <label>I agree with the <a href="#tandc">Terms & Conditions</a> and the <a href="#privacy">Privacy Policy</a>. </label>
                                </div>
                                <input type="submit" name="submitButton" id="submitButton" class="button-cta" value="Generate Mail">
                            </form>
                            <div class="alert alert-success" id="success" style="display:none"> Success Message</div>  
                        </div>                                            
                    </div>                    
                </div> 

                <div class="mail-overlay">
                    <img class="img-mail-overlay" src="img/mail.svg">
                </div>                    
            </section>

            <section id="howto">
                <div class="howto-div", id="howto"> <!-- HOW TO -->
                    <div class="howto-header">
                        <div class="howto-title"><h1>How It Works</h1></div>
                        <img class="illustration" src="img/illustration.png" alt="mail mask racoon">
                    </div>
                    <div class="howto-container", id="howto-container">
                        <div class="how-to-text" id="how-to-text">
                            <p>MailMask creates a unique and random email address for you. This way your real address is kept secret for the website or the app developer. This email address is uniquely fit to reroute incoming mails from the webpage to your address.</p>
                            <p>Your MailMask address consists out of a unique id and the domain ending "@mailmask.me".</p>
                            <p>Any messages sent to this address by the app or website developer are automatically forwarded to your personal email address.</p>
                            <p>MailMask <b>never</b> processes the content of your incoming mails. The data is stored only for forwarding and is deleted after the mail has been sent to your private email address.</p>                                                
                        </div>  
                    </div>                
                </div>
            </section>
            
            <section id="cancel"> <!-- CANCEL -->
                <div class="content-box">
                <div class="cancel-header">
                    <div class="cancel-title"><h1>Cancel Your MailMask</h1></div>
                    <div class="cancel-container", id="cancel-container">
                        <div class="cancel-text" id="cancel-text">
                            <p>If you wish to cancel or deactivate your MailMask forwarding address, simply paste the email in the following form and confirm your submission.</p>
                        </div>
                        <form action="">            
                            <input id="cancelMail" name="email" placeholder="Your MailMask address here..." type="email" pattern="[A-Za-z0-9._%+-]+@mailmask\.me" required></input>
                            <input type="submit" id="cancelButton" name="cancelButton" class="button-cta" value="Cancel Mail">
                        </form>  
                        <div class="alert alert-success" id="cancelSuccess" style="display:none"> Success Message</div>  
                    </div>
                </div>
            </div>
            </section> 

            <section id="support"> <!-- Support -->
                <div class="content-box">
                <div class="support-header">
                    <div class="support-title"><h1>Support MailMask</h1></div>
                    <div class="support-img"><img src="img/support-img.svg" alt="MailMask racoon playing with a bitcoin - illustration"></div>
                    <div class="support-container", id="sub-container">
                        <div class="sub-text" id="sub-text">
                            <p>Please feel free to donate in case you enjoy my service. MailMask currently runs without ads and does not make any revenue other than donations.</p>
                            <p>Your donations will be used to cover the costs of servers, domains and work for the project.</p>
                            <p>Currently, MailMask supports the following ways of payments. I consider every donation as private and anonymous.</p>
                            <div class="support-list">
                                <label class="support-row-label" for="BTC"><strong>Bitcoin (BTC)</strong></label>
                                <input class="support-row-input" type="text" value="1C3MVvvJwfEiS5KQmZzJkiVq7obYi2zRqb" readonly>
                                <br>
                                <label class="support-row-label" for="ETH"><strong>Ethereum (ETH)</strong></label>
                                <input class="support-row-input" type="text" value="0x1DdD9c188aaf9198b664CeBce9a9cD03E75FdD49" readonly>
                                <br>
                                <label class="support-row-label" for="ETH"><strong>ZCash (ZEC)</strong></label>
                                <input class="support-row-input" type="text" value="t1Sv6rSRchWUXkWNz7PkeYixTs9M2aAs4wX" readonly>
                            </div>
                        </div>                        
                    </div>
                </div>
            </div>
            </section> 

            <section id="tandc"> <!-- Terms and Conditions -->
                <div class="content-box">
                <div class="tandc-header">
                    <div class="tandc-title"><h1>Terms and Conditions</h1></div>
                    <div class="tandc-container", id="sub-container">
                        <div class="sub-text" id="sub-text">
                            <p>MailMask is an email forwarding service. The service lets users create alias addresses of their own personal email. Any incoming mail will get forwarded to the corresponding personal email address.</p>
                            <p>You agree to these Terms and Conditions (“Terms”) by installing or using our apps, services, or website (together, “Services”).</p>
                            <h2>About MailMask services</h2>
                            <p><strong>Minimum Age. </strong>You must be at least 13 years old to use our Services. The minimum age to use our Services without parental approval may be higher in your home country.</p>
                            <p><strong>Account Registration. </strong>To create an account you must register for our Services using your email address. You agree to receive email messages from us and third parties.</p>
                            <p>Please read the <a href="#privacy">Privacy Policy</a> to understand how we safeguard the information you provide when using our Services.</p>
                            <h2>Using MailMask</h2>
                            <p><strong>Our Terms and Policies. </strong>You must use our Services according to our Terms and posted policies. If we disable your account for a violation of our Terms, you will not create another account without our permission.</p>
                            <p><strong>Legal and Acceptable Use. </strong>You agree to use our Services only for legal, authorized, and acceptable purposes. You will not use (or assist others in using) our Services in ways that: (a) violate or infringe the rights of MailMask, our users, or others, including privacy, publicity, intellectual property, or other proprietary rights; (b) involve recieving illegal or impermissible communications.</p>
                            <p><strong>Harm to MailMask. </strong>You must not (or assist others to) access, use, modify, distribute, transfer, or exploit our Services in unauthorized manners, or in ways that harm MailMask, our Services, or systems. For example you must not (a) gain or try to gain unauthorized access to our Services or systems; (b) disrupt the integrity or performance of our Services; (c) create accounts for our Services through unauthorized or automated means; (d) collect information about our users in any unauthorized manner; or (e) sell, rent, or charge for our Services.</p>
                            <p><strong>Keeping Your Account Secure. </strong>MailMask embraces privacy by design and does not have the ability to access the recieving/forwarded emails. You are responsible for keeping your device and your email account safe and secure. In case of losing access to your email account, MailMask will not change or reroute the current mailing addess.</p>
                            <p><strong>Third-party services. </strong>Our Services allow you to access, use, or interact with third-party websites, apps, content, and other products and services. When you use third-party services, their terms and privacy policies govern your use of those services. In case of a violation of third-party terms, MailMask will disable your account.</p>
                            <h2>Your Rights and License with MailMask</h2>
                            <p><strong>Your Rights. </strong>You own the information you recieve through our Services. You must have the rights to the email account you use to sign up for your MailMask account.</p>
                            <p><strong>MailMask Rights. </strong>We own all copyrights, trademarks, domains, logos, trade dress, trade secrets, patents, and other intellectual property rights associated with our Services. You may not use our copyrights, trademarks, domains, logos, trade dress, patents, and other intellectual property rights unless you have our written permission. To report copyright, trademark, or other intellectual property infringement, please contact <a>hendrik.schuette@tutanota.com</a>.</p>                
                            <p><strong>MailMask's License to You. </strong>We grant you a limited, revocable, non-exclusive, and non-transferable license to use our Services in accordance with these Terms.</p>
                        </div>                        
                    </div>
                </div>
            </div>
            </section> 

            <section id="privacy"> <!-- Terms and Conditions -->
                <div class="content-box">
                <div class="privacy-header">
                    <div class="privacy-title"><h1>Privacy Policy</h1></div>
                    <div class="privacy-container", id="sub-container">
                        <div class="sub-text" id="sub-text">
                            <p>MailMask is an email forwarding service. The service lets users create alias addresses of their own personal email. Any incoming mail will get forwarded to the corresponding personal email address.</p>
                            <h2>Information you provide</h1>
                            <p><strong>Account Information. </strong>You register by entering your email address when creating your MailMask account. MailMask stores this with the generated forwarding address.</p>
                            <p><strong>Emails. </strong>Any incoming email to a verified "@mailmask.me" address gets stored for the sole purpose of forwarding the email to the corresponding user email address.</p>
                            <p>In case the user canceled his/her MailMask address or the email does not exist, MailMask deletes the email anyway.</p>
                            <p>MailMask does not save or the content, recipient or sending behaviour permanently and does not intent on doing so.</p>
                            <p><strong>Logs. </strong> Logs of the incoming emails are kept for the sake of debugging the service. The logs include potential errors in forwarding the address but do not store the email contents, original recipient or forwarded personal email address. The logs are stored for 24h.</p>
                            <p><strong>User Support. </strong>If you contact MailMask User Support, any personal data you may share with us is kept only for the purposes of researching the issue and contacting you about your case.</p>
                            <h2>Information we may share</h1>
                            <p><strong>Third Parties. </strong> MailMask may word with third parties to provide some of their services. For example, MailMask may use an email service to trigger and forward the incoming mails. These providers are bound by their Privacy Policies to safeguard that information.</p>
                            <p><strong>Other instances where MailMask may need to share your data</strong></p>
                            <li>To meet any applicable law, regulation, legal process or enforceable governmental request.</li>
                            <li>To enforce applicable Terms, including investigation of potential violations.</li>
                            <li>To detect, prevent, or otherwise address fraud, security, or technical issues.</li>
                            <li>To protect against harm to the rights, property, or safety of Signal, our users, or the public as required or permitted by law.</li>
                            <h2>Updates</h1>
                            <p>MailMask will update this privacy policy as needed so it is current and reflects the ongoing developement of this service. You are advised to check this page periodically as we will notify you by posting the new changes to this website. Your continued use of our Services confirms your acceptance of our updated Privacy Policy.</p>
                            <h2>Terms</h1>
                            <p>Please also read our <a href="#tandc">Terms & Conditions</a> which also governs the terms of this Privacy Policy.</p>
                            <h2>Contact</h1>
                            <p>If you have any questions or suggestions about my Privacy Policy, do not hesitate to contact us at hendrik.schuette@tutanota.com.</p>
                            <hr>
                            <p>Effective as of April 6, 2021</p>
                        </div>                        
                    </div>
                </div>
            </div>
            </section> 
        </main>        

        <div class="imprint", id="imprint"> <!-- IMPRINT -->
            <button onclick="document.getElementById('imprint-modal').style.clipPath='inset(-20% -20% -20% -20% round 2rem)'" class="imprint-button">
                i
            </button>

            <div id="imprint-modal" class="imprint-modal">
                <div class="imprint-modal-content">
                  <div class="imprint-container-header"> 
                    <span onclick="document.getElementById('imprint-modal').style.clipPath='inset(100% 0% 0% 100% round 2rem)'">&times;</span>
                    <h2>Imprint</h2>
                  </div>
                  <div class="imprint-container">
                    <p>Made with ♥ by Hendrik Schuette</p>
                    <p>Angaben gemäß § 5 TMG: Hendrik Schuette Turmstraße 54, 10551 Berlin
                        Kontakt: hendrik.schuette@tutanota.com</p>
                  </div>                      
                </div>
              </div>
            </div>
        </div>
        
        <script src="https://ajax.aspnetcdn.com/ajax/jquery/jquery-1.9.0.js"></script>
                
        <script type="text/javascript">
            var API_URL = "https://423ghva5nf.execute-api.eu-west-1.amazonaws.com/prod/mails";
            
            $("#submitButton").on('click', function() {
                if (!$("#mail").val()) {
                    console.log("Error - invalid request. No email input.") 
                } else {
                    if ($("#checkbox").prop('checked') == false) {
                        console.log("Error - invalid request. Checkbox not checked.")
                    } else {
                        $.ajax({
                        type: "POST",
                        url: API_URL,
                        data: JSON.stringify({"forwardingAddress": $("#mail").val()}),
                        contentType: "application/JSON",

                        success: function(data) {
                            $("#success").show(),
                            setTimeout(function() { $("#success").hide(); }, 5000)
                            $("#mail").val("")
                        }
                    }); 
                    return false;
                    }
                }                    
            });

            function validateEmail(email) {
                var pattern = new RegExp(/[+a-zA-Z0-9._-]+@mailmask+\.me/gmi);
                return pattern.test( email );
            }

            $("#cancelButton").on('click', function() {                
                if (!$("#cancelMail").val()) {
                    console.log("Error - invalid request. No email input.") 
                } else {
                    if (!validateEmail($("#cancelMail").val())) {
                    console.log("Error - invalid request. Wrong email format.")
                    console.log($("#cancelMail"))
                } else {
                    var mailID = $("#cancelMail").val().toString().slice(0,8).toLowerCase()                    

                    console.log("Canceling was a success!") 
                        $.ajax({
                        type: "DELETE",
                        url: API_URL,
                        data: JSON.stringify({"mailID": mailID}),
                        contentType: "application/JSON",

                        success: function(data) {
                            $("#cancelSuccess").show(),
                            setTimeout(function() { $("#cancelSuccess").hide(); }, 5000)
                            $("#cancelMail").val("")
                        }
                    }); 
                    return false;
                    }
                }
            });

            function getUrlVars() {
                var vars = {};
                var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {
                    vars[key] = value;
                });
                return vars;
            }

            function getUrlParam(parameter, defaultvalue){
                var urlparameter = defaultvalue;
                if(window.location.href.indexOf(parameter) > -1){
                    urlparameter = getUrlVars()[parameter];
                    }
                return urlparameter;
            };

            window.onload = function() {
                var cancelMail = decodeURI(getUrlParam("cancelMail", ""));

                cancelMail = cancelMail.replace("%40", "@")
                cancelMail = cancelMail.replace("#cancel", "")
                $("#cancelMail").val(cancelMail)

            };

            
        </script>
    </body>
</html>